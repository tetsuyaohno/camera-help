# 操作マニュアル：工事・工種・測点登録機能

## 目次
1. [工事登録・選択画面](#1-工事登録・選択画面)
2. [工種・測点登録画面](#2-工種・測点登録画面)  
[プライバシーポリシー](https://sites.google.com/ohnosangyou.page/top/home/%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%A2%E3%83%97%E3%83%AA/%E3%83%97%E3%83%A9%E3%82%A4%E3%83%90%E3%82%B7%E3%83%BC%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC?authuser=0)  
---

## 1. 工事登録・選択画面

### 1.1 概要
「工事登録・選択画面」は、新規工事の登録／既存工事の選択、および登録済み工種・測点の編集画面への遷移を行う画面です。

### 1.2 画面構成
- **タイトルバー**：画面上部に「工事登録・選択」と表示されます。
- **工事一覧**：ヘッダー付きのリスト表示（ID／工事番号／工事名）
  - 1 行目がヘッダー、2 行目以降がデータ行。
  - 選択中の行はグレー背景でハイライト。
- **選択情報**：リスト外の入力欄に、選択中の行のID・番号・名称が表示されます。
- **追加ボタン**（[追加]）：入力欄の内容を新規工事として登録し、リスト末尾に追加します。
- **削除ボタン**（[削除]）：選択中の行をXMLファイルから削除し、リストからも削除します。
- **工種・測点登録へ**（[工種・測点登録へ]）：現在の選択中の工事IDを引き継いで、次画面（工種・測点登録画面）を開きます。
- **戻るボタン**（左上戻るアイコン）：前の画面に戻ります。

### 1.3 操作手順
1. **工事の選択**
   1. リスト上で任意の行をタップします。
   2. タップした行がグレーでハイライトされ、入力欄にID・工事番号・工事名が表示されます。
2. **工事の編集**
   1. 画面下部の「工事番号」「工事名」の入力欄で値を修正します。
   2. 入力欄からフォーカスを外すと、自動でXMLが更新され、リスト上の該当行が更新されます。
3. **新規工事の追加**
   1. 入力欄に新しい工事番号・工事名を入力します。
   2. [追加] ボタンをタップします。
   3. 新しい行がリスト末尾に追加され、IDが自動採番されます。
4. **工事の削除**
   1. 削除したい行をリスト上で選択します。
   2. [削除] ボタンをタップします。
   3. 確認ダイアログが表示されるので、[OK] を選択で削除完了。
5. **工種・測点登録画面へ遷移**
   1. リストで対象の工事を選択後、[工種・測点登録へ] ボタンをタップします。
   2. 遷移先画面で、選択した工事IDをもとに工種・測点の編集が行えます。
6. **画面を閉じる**
   - 左上の戻るアイコンをタップするか、端末の戻るボタンで画面を閉じます。

### 1.4 注意事項
- 入力欄に空文字のまま [追加] を押すと空行が登録される可能性があります。必ず工事番号・工事名を入力してください。
- 削除操作は取り消せません。重要なデータは事前にバックアップをおすすめします。

---

## 2. 工種・測点登録画面

### 2.1 概要
「工種・測点登録画面」は、選択中の工事に紐づく工種および測点を登録・編集・削除するための画面です。

### 2.2 画面構成
- **タイトルバー**：画面上部に「工種・測点登録」と表示されます。
- **選択中工事情報**：画面上部に、工事ID・工事番号・工事名が表示されます。
- **操作案内**：「長押しで削除、追加は最下段に入力」といったヒント文。
- **登録工種リスト（左側）**：工種名一覧を表示する RecyclerView
- **登録測点リスト（右側）**：測点名一覧を表示する RecyclerView
- **戻るボタン**（[戻る]）：前の画面に戻ります。

### 2.3 操作手順
1. **工種／測点の選択**
   - リスト上の任意の行（工種名または測点名）をタップするとフォーカスが移動します。編集は次の手順で行います。
2. **編集（名称変更）**
   1. 対象の行の名称部分（白背景のEditText）をタップし、テキストを修正します。
   2. テキスト入力後、他の場所をタップしてフォーカスを外すと、自動でXMLファイルが更新されます。
3. **新規追加**
   1. リストの最下段に表示されている空行のEditTextをタップします。
   2. 工種名（または測点名）を入力します。
   3. 入力中もしくは入力後、フォーカスを外すか Enter を押すと、新しい行が登録され、下に空行が自動追加されます。
4. **削除**
   1. 削除したい行の名称部分を長押しします。
   2. 削除確認ダイアログが表示されるので、[OK] を選択して削除します。
5. **画面を閉じる**
   - 画面下部の [戻る] ボタンをタップするか、端末の戻るボタンで前画面に戻ります。

### 2.4 注意事項
- 最下段の空行は常に1行表示され、ここに入力することで新規行が追加されます。
- 空行を長押ししても削除できません。
- 編集・追加後は必ずフォーカスを外して処理を確定してください。

---

以上が「工事登録・選択」と「工種・測点登録」機能の操作マニュアルです。

